(this.webpackJsonpreact_app3=this.webpackJsonpreact_app3||[]).push([[0],{45:function(e,t,a){e.exports=a(78)},50:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(42),o=a.n(c),l=(a(50),a(7)),s=a(8),i=a(10),u=a(9),m=a(6),h=a(16),d=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(m.b,{to:"/",className:"navbar-brand"},"ReactApp"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(m.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item active"},r.a.createElement(m.b,{to:"/plan",className:"nav-link"},"Plan"))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/about",className:"nav-link"},"About")))),r.a.createElement("hr",null))}}]),a}(r.a.Component),p=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"About"),r.a.createElement("hr",null),r.a.createElement("h3",null,"about, text"))}}]),a}(r.a.Component),f=a(4),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={valid_login:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.auth().onAuthStateChanged((function(t){t?(console.log("#Auth-OK"),e.setState({valid_login:!0})):console.log("#no-User")}))}},{key:"dispLogin",value:function(){return this.state.valid_login?r.a.createElement("div",null,r.a.createElement(m.b,{to:"/logout"},"[ Logout ]")):r.a.createElement("div",null,r.a.createElement(m.b,{to:"/login"},"[ Login ]"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.dispLogin(),r.a.createElement("h1",null,"Home"),r.a.createElement("hr",null),r.a.createElement("p",null,"welcome, home"))}}]),a}(r.a.Component),v=a(44),g=a.n(v),E=a(18),k=a.n(E),_=function(e){if("undefined"!==typeof e.created_at){var t=k()(e.created_at.toDate());e.created_at_str=t.format("YYYY-MM-DD HH:mm")}return e},y=function(e,t){if(t||(t="YYYY-MM-DD hh:mm:ss.SSS"),(t=(t=(t=(t=(t=(t=t.replace(/YYYY/g,e.getFullYear())).replace(/MM/g,("0"+(e.getMonth()+1)).slice(-2))).replace(/DD/g,("0"+e.getDate()).slice(-2))).replace(/hh/g,("0"+e.getHours()).slice(-2))).replace(/mm/g,("0"+e.getMinutes()).slice(-2))).replace(/ss/g,("0"+e.getSeconds()).slice(-2))).match(/S/g))for(var a=("00"+e.getMilliseconds()).slice(-3),n=t.match(/S/g).length,r=0;r<n;r++)t=t.replace(/S/,a.substring(r,r+1));return t},C=function(e,t){var a=(e="0000000000"+e).length,n=a-t;return e.substring(n,a)},N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=y(new Date,"YYYY-MM-DD_hhmmss");g.a.get("/cms.json?"+t).then((function(t){e.setState({data:t.data}),console.log(e.state.data.items)})).catch((function(e){console.log(e)}))}},{key:"tabRow",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"test"),r.a.createElement("h2",null,"welcome, test2"),r.a.createElement("hr",null),r.a.createElement("div",null))}}]),a}(r.a.Component),O=a(14),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:"",content:""},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.database=f.a.firestore();var e=this;f.a.auth().onAuthStateChanged((function(t){t?console.log("#Auth-OK"):(alert("Error, auth error, please Google Login"),e.props.history.push("/task"),console.log("#no-User"))}))}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleChangeContent",value:function(e){this.setState({content:e.target.value})}},{key:"add_item",value:function(){var e={title:this.state.title,content:this.state.content,created_at:new Date},t=this;""!=this.newTodoName&&(this.database.collection("tasks").add(e).then((function(e){console.log("Document written with ID: ",e.id),t.props.history.push("/task")})).catch((function(e){alert("Error save: "+e),console.error("Error adding document: ",e)})),this.newTodoName="")}},{key:"handleClick",value:function(){console.log("#-handleClick"),this.add_item()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/task",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",{className:"mt-2"},"Create - Task"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",className:"form-control",onChange:this.handleChangeTitle.bind(this)})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Content:"),r.a.createElement("input",{type:"text",className:"form-control",onChange:this.handleChangeContent.bind(this)})))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},"Create")))}}]),a}(n.Component),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.obj.id),r.a.createElement("td",null,r.a.createElement("h3",null,this.props.obj.title)),r.a.createElement("td",null,this.props.obj.content),r.a.createElement("td",null,r.a.createElement(m.b,{to:"/task_edit/".concat(this.props.obj.id),className:"btn btn-sm btn-outline-primary"},"Edit")),r.a.createElement("td",null))}}]),a}(n.Component),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:""},n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.get_items()}},{key:"get_items",value:function(){var e=[],t=this;this.database=f.a.firestore();var a=this.database.collection("tasks");(a=a.orderBy("created_at","desc")).get().then((function(a){a.forEach((function(t){var a=t.data();e.push({id:t.id,title:a.title,content:a.content,created_at:a.created_at})})),t.setState({data:e}),console.log(e)}))}},{key:"tabRow",value:function(){if(this.state.data instanceof Array)return this.state.data.map((function(e,t){return r.a.createElement(j,{obj:e,key:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Task - index"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(m.b,{to:"/task_create",className:"btn btn-sm btn-primary"},"+ Create")),r.a.createElement("div",{className:"col-md-6"})),r.a.createElement("br",null),r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Conent"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.tabRow())))}}]),a}(n.Component),Y=a(5),M=a.n(Y),x=a(15),S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:"",content:""},n.id=0,n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.handleClickDelete=n.handleClickDelete.bind(Object(O.a)(n)),n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.id=this.props.match.params.id,console.log(this.id),this.database=f.a.firestore();var e=this;f.a.auth().onAuthStateChanged((function(t){t?(console.log("#Auth-OK"),e.get_item(e.id)):(alert("Error, auth error, please Google Login"),e.props.history.push("/task"),console.log("#no-User"))}))}},{key:"get_item",value:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("id: ",t),a=this.database.collection("tasks").doc(t),n=this,a.get().then((function(e){var t=e.data();console.log(t),n.setState({title:t.title,content:t.content})})).catch((function(e){console.log("Error getting document:",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_item",value:function(){this.database.collection("tasks").doc(this.id).update({title:this.state.title,content:this.state.content}).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))}},{key:"handleClickDelete",value:function(){var e=this;this.database.collection("tasks").doc(this.id).delete().then((function(){console.log("Document successfully deleted!"),e.props.history.push("/task")})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"handleClick",value:function(){console.log("#-handleClick"),this.update_item()}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleChangeContent",value:function(e){this.setState({content:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/task",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",null,"Edit - task"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"}),r.a.createElement("div",{className:"col-md-2"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.title,onChange:this.handleChangeTitle.bind(this)})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{name:"product_price"},"Content"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.content,onChange:this.handleChangeContent.bind(this)})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},"Save")),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-outline-danger btn-sm mt-2",onClick:this.handleClickDelete},"Delete")))}}]),a}(n.Component),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:"",content:""},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.database=f.a.firestore()}},{key:"check_auth",value:function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"add_item",value:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={title:"title-"+t,content:"content-"+t,created_at:f.a.firestore.Timestamp.fromDate(new Date)},e.next=4,this.database.collection("tasks").add(a);case 4:return n=e.sent,console.log("Document written with ID: ",n.id),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),console.error("error, csrf token"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"add_post_item",value:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={category_id:"8eV2uVRBU3mNVz3sRase",title:"title-1231B-"+t,content:"content-1231B-"+t,created_at:f.a.firestore.Timestamp.fromDate(new Date)},e.next=4,this.database.collection("cms_posts").add(a);case 4:return n=e.sent,console.log("Document written with ID: ",n.id),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),console.error("error, csrf token"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"test_get",value:function(){var e=Object(x.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],this.database=f.a.firestore(),a=(a=this.database.collection("tasks")).orderBy("created_at","desc").limit(10),e.next=7,a.get();case 7:return e.sent.forEach((function(e){var a=e.data();t.push(a)})),e.abrupt("return",t);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),console.error("error, test_get"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"test_get2",value:function(){var e=Object(x.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],this.database=f.a.firestore(),a=this.database.collection("cms_posts").where("category_id","==","2xJ4b1zJphaXfb52gYgh").limit(10),e.next=6,a.get();case 6:return e.sent.forEach((function(e){var a=e.data();a.id=e.id,t.push(a)})),console.log(t),e.abrupt("return",t);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),console.error("error, test_get"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"search_test",value:function(){var e=Object(x.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],this.database=f.a.firestore(),a=this.database.collection("cms_posts").orderBy("created_at","desc"),e.next=6,a.get();case 6:return e.sent.forEach((function(e){var a=e.data();a.id=e.id;a.title.indexOf("n")>=0&&(console.log(a.title),t.push(a))})),console.log(t),e.abrupt("return",t);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),console.error("error, test_get"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("#-handleClick"),e.next=3,this.search_test();case 3:e.sent,console.log("#-handleClick-End");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/task",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",{className:"mt-2"},"Test"),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},"test")))}}]),a}(n.Component),B={valid_auth:function(){var e=Object(x.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth().onAuthStateChanged((function(e){return!!e||(console.log("#no-User"),!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),get_users:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],this.database=t.firestore(),n=this.database.collection("plan_users"),e.next=6,n.get();case 6:return e.sent.forEach((function(e){var t=e.data();a.push(t)})),e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),console.error(e.t0),new Error("Error , get_users");case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),add_users:function(){var e=Object(x.a)(M.a.mark((function e(t,a){var n,r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={name:a.displayName,mail:a.email,uid:a.uid,password:"",created_at:t.firestore.Timestamp.fromDate(new Date)},r=t.firestore(),e.next=5,r.collection("plan_users").add(n);case 5:c=e.sent,console.log("Document written with ID: ",c.id),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),new Error("Error , add_users");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()},I=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:"",content:""},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.db=null,n.provider=new f.a.auth.GoogleAuthProvider,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.popup_open()}},{key:"handleClick",value:function(){console.log("#-handleClick")}},{key:"popup_open",value:function(){var e=this;f.a.auth().signInWithPopup(this.provider).then(function(){var t=Object(x.a)(M.a.mark((function t(a){var n,r,c;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.credential.accessToken,n=a.user,console.log(n.uid),t.next=5,B.get_users(f.a);case 5:if(!((r=t.sent).length<1)){t.next=11;break}return t.next=9,B.add_users(f.a,n);case 9:t.next=14;break;case 11:c=r[0],console.log(c.uid),c.uid===n.uid?console.log("admin-user:",n.uid):(console.error("error, not-admiuser:",n.uid),e.proc_logout(n));case 14:e.props.history.push("/");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e.code),console.log(e.message)}))}},{key:"proc_logout",value:function(e){var t=this;f.a.auth().signOut().then((function(){console.log("#sign-out-OK"),alert("Error, Invalid  admin user: "+e.email),t.props.history.push("/")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",{className:"mt-2"},"Google Login:"),r.a.createElement("hr",null),r.a.createElement("p",null,"\u30fb \u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u753b\u9762\u3067\u3001Google\u30ed\u30b0\u30a4\u30f3\u8a8d\u8a3c\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),r.a.createElement("p",null,"\u30fb chrome\u30d6\u30e9\u30a6\u30b6\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u8a31\u53ef\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002"),r.a.createElement("p",null,"\u30fb chrome\u30d6\u30e9\u30a6\u30b6\u306b\u3001Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4e8b\u304c\u5fc5\u7528\u3067\u3059\u3002"))}}]),a}(n.Component),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:"",content:""},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.procLogout()}},{key:"handleClick",value:function(){console.log("#-handleClick")}},{key:"procLogout",value:function(){var e=this;f.a.auth().signOut().then((function(){console.log("#sign-out-OK"),e.props.history.push("/")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/task",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",{className:"mt-2"},"Logout"),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},"test")))}}]),a}(n.Component),L={convert_pdate:function(e){if("undefined"!==typeof e.p_date){var t=k()(e.p_date.toDate());e.date_str=t.format("YYYY-MM-DD HH:mm")}return e},convert_pdate_YYMMDD:function(e){if("undefined"!==typeof e.p_date){var t=k()(e.p_date.toDate());e.date_str=t.format("YYYY-MM-DD")}return e},get_const:function(){return{DB_NAME:"plans_idx_kuc_db",DB_VERSION:1,DB_STORE:{plans:"++id, p_date, content ,created_at"}}},get_week_items:function(e){var t=this.get_start_date(e);return this.get_week_array(t)},convert_week_array:function(e,t,a){var n=[],r=this,c=a.format("YYYY-MM-DD");return e.forEach((function(e){for(var a=0;a<7;a++)if(null!=e.weekItem[a].day){var o=e.weekItem[a].day.format("YYYY-MM-DD"),l=r.get_plan_item(o,t);if(null!=l){var s=l.content.substring(0,6);e.weekItem[a].content=s,e.weekItem[a].id=l.id,e.weekItem[a].db_none=0}o===c&&(e.weekItem[a].today=1)}n.push(e)})),n},get_plan_item:function(e,t){var a=null;return t.forEach((function(t){var n=y(t.p_date.toDate(),"YYYY-MM-DD");e===n&&(a={content:t.content,id:t.id})})),a},get_week_array:function(e){for(var t=this.init_day_params(),a=[],n=[],r=e.day(),c=e.endOf("month").date(),o=0;o<r;o++)n.push(t);for(var l=1,s=1;s<=c;s++){var i=this.init_day_params(),u=C(s,2),m=k()(e.format("YYYY-MM-"+u));if(i.day=m,i.day_disp=m.date(),n.push(i),6===(r=m.day())%7||c===m.date()){for(var h=6-r,d=0;d<h;d++){var p=this.init_day_params();n.push(p)}a.push({no:l,weekItem:n}),n=[],l+=1}}return a},init_day_params:function(){return{day:null,day_disp:null,today:0,content:null,db_none:1,id:0}},get_start_date:function(e){var t=e.format("YYYY-MM");return t+="-01",k()(t)},test1:function(){console.log("#_func1aa");var e=k()().toDate(),t=k()().add(1,"days").toDate(),a=k()().add(1,"days").day();console.log(t),console.log(a),console.log(e)}},R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={p_date:"",content:""},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.db=null,n.user=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.database=f.a.firestore();var e=this;f.a.auth().onAuthStateChanged((function(t){t?(e.user=t,console.log("#Auth-OK")):(alert("Error, auth error, please Google Login"),e.props.history.push("/plan"),console.log("#no-User"))}));var t=k()().format("YYYY-MM-DD");console.log(t),this.setState({p_date:t})}},{key:"handleChangeDate",value:function(e){this.setState({p_date:e.target.value})}},{key:"handleChangeContent",value:function(e){this.setState({content:e.target.value})}},{key:"add_item",value:function(){console.log(this.user.uid);var e=this,t=this.state.p_date+"T00:00:00.000Z",a=new Date(t),n={p_date:f.a.firestore.Timestamp.fromDate(a),content:this.state.content,created_at:f.a.firestore.Timestamp.fromDate(new Date),uid:this.user.uid};this.database.collection("plans").add(n).then((function(t){console.log("Document written with ID: ",t.id),e.props.history.push("/plan")})).catch((function(e){alert("Error save: "+e),console.error("Error adding document: ",e)}))}},{key:"handleClick",value:function(){console.log("#-handleClick"),this.add_item()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/plan",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",{className:"mt-2"},"Plan - Create"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-3 control-label"},"\u65e5\u4ed8"),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("input",{type:"date",className:"form-control",value:this.state.p_date,onChange:this.handleChangeDate.bind(this),required:"required"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Content:"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{type:"text",className:"form-control",rows:"10",onChange:this.handleChangeContent.bind(this)}))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},"Create")))}}]),a}(n.Component),G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"trDisp",value:function(e){if(e instanceof Array)return e.map((function(e,t){return 1===e.db_none?r.a.createElement("td",{className:"td_cls",key:t},e.day_disp,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("td",{className:"td_cls",key:t},r.a.createElement(m.b,{to:"/plan_show/".concat(e.id)},r.a.createElement("div",null,e.day_disp,r.a.createElement("br",null),e.content)),r.a.createElement(m.b,{to:"/plan_edit/".concat(e.id),className:"btn btn-outline-primary btn-sm td_edit"},"Edit ",r.a.createElement("i",{className:"far fa-edit"})))}))}},{key:"render",value:function(){return r.a.createElement("tr",null,this.trDisp(this.props.obj))}}]),a}(n.Component),K=(a(76),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:"",data_org:[],weeks:[],month:null,month_str:""},n.db=null,n.handleClickBefore=n.handleClickBefore.bind(Object(O.a)(n)),n.handleClickAfter=n.handleClickAfter.bind(Object(O.a)(n)),n.user="",n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.auth().onAuthStateChanged((function(t){t?(e.user=t,console.log("#Auth-OK"),e.init_plan()):(alert("Error, auth error, please Google Login"),console.log("#no-User"),e.props.history.push("/"))}))}},{key:"init_plan",value:function(){var e=k()(),t=L.get_week_items(e);this.setState({weeks:t,month:e,month_str:e.format("YYYY-MM")}),this.get_items(e)}},{key:"handleClickAfter",value:function(){var e=this.state.month.add(1,"month").startOf("month");console.log(e),this.change_month(e),this.get_items(e)}},{key:"handleClickBefore",value:function(){var e=this.state.month.add(-1,"month").startOf("month");console.log(e),this.change_month(e),this.get_items(e)}},{key:"change_month",value:function(e){var t=L.get_week_items(e);this.setState({weeks:t,month:e,month_str:e.format("YYYY-MM")})}},{key:"get_items",value:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n,r,c,o,l,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this,n=k()(t.format("YYYY-MM-DD")),r=n.startOf("month"),c=(c=k()(t.format("YYYY-MM-DD"))).add(1,"month").startOf("month"),r=r.toDate(),c=c.toDate(),o=[],this.database=f.a.firestore(),l=this.database.collection("plans").where("p_date",">=",r).where("p_date","<",c),e.next=13,l.get();case 13:e.sent.forEach((function(e){var t=e.data();t.id=e.id,(t=L.convert_pdate(t)).uid===a.user.uid&&o.push(t)})),console.log(o),s=L.convert_week_array(this.state.weeks,o,k()()),this.setState({weeks:s}),e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(0),console.error(e.t0),console.error("error, test_get"),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tabRow",value:function(){if(this.state.weeks instanceof Array)return this.state.weeks.map((function(e,t){return r.a.createElement(G,{obj:e.weekItem,key:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h3",null,"Plan : ",this.state.month_str)),r.a.createElement("div",{className:"col-md-6 btn_move_wrap"},r.a.createElement("button",{onClick:this.handleClickBefore,className:"btn btn-outline-primary"},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})," Before"),r.a.createElement("button",{onClick:this.handleClickAfter,className:"btn btn-outline-primary ml-2"},"After ",r.a.createElement("i",{className:"fas fa-arrow-circle-right"})))),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(m.b,{to:"/plan_create",className:"btn btn-sm btn-primary"},"+ Create")),r.a.createElement("div",{className:"col-md-6"})),r.a.createElement("table",{className:"table table-bordered mt-2"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"th_sun"},"\u65e5"),r.a.createElement("th",null,"\u6708"),r.a.createElement("th",null,"\u706b"),r.a.createElement("th",null,"\u6c34"),r.a.createElement("th",null,"\u6728"),r.a.createElement("th",null,"\u91d1"),r.a.createElement("th",{className:"th_sat"},"\u571f"))),r.a.createElement("tbody",null,this.tabRow())))}}]),a}(n.Component)),U=(a(77),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={p_date:"",content:"",type:0,created_at:""},n.id=0,n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.database=f.a.firestore(),this.id=this.props.match.params.id,console.log(this.id),this.get_item(this.id)}},{key:"get_item",value:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.collection("plans").doc(t);case 2:return a=e.sent,e.next=5,a.get();case 5:n=e.sent,r=n.data(),r=L.convert_pdate_YYMMDD(r),r=_(r),console.log(r),this.setState({p_date:r.date_str,content:r.content,created_at:r.created_at_str});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){console.log("#-handleClick")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container plan_show_wrap"},r.a.createElement(m.b,{to:"/plan",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",null,this.state.p_date),"Date : ",this.state.created_at,r.a.createElement("hr",null),r.a.createElement("pre",{className:"pre_text"},this.state.content))}}]),a}(n.Component)),H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={p_date:"",content:""},n.id=0,n.handleClick=n.handleClick.bind(Object(O.a)(n)),n.handleClickDelete=n.handleClickDelete.bind(Object(O.a)(n)),n.db=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.id=this.props.match.params.id,console.log(this.id),this.database=f.a.firestore();var e=this;f.a.auth().onAuthStateChanged((function(t){t?(console.log("#Auth-OK"),e.get_item(e.id)):(alert("Error, auth error, please Google Login"),e.props.history.push("/plan"),console.log("#no-User"))}))}},{key:"get_item",value:function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.collection("plans").doc(t);case 2:return a=e.sent,e.next=5,a.get();case 5:n=e.sent,r=n.data(),r=L.convert_pdate_YYMMDD(r),r=_(r),console.log(r),this.setState({p_date:r.date_str,content:r.content});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_item",value:function(){var e=this.database.collection("plans").doc(this.id),t=this;e.update({content:this.state.content}).then((function(){t.props.history.push("/plan"),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))}},{key:"handleClickDelete",value:function(){var e=this;this.database.collection("plans").doc(this.id).delete().then((function(){console.log("Document successfully deleted!"),e.props.history.push("/plan")})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"handleClick",value:function(){console.log("#-handleClick"),this.update_item()}},{key:"handleChangeContent",value:function(e){this.setState({content:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/plan",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("h1",null,"Plan - Edit"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Content:"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{type:"text",className:"form-control",rows:"10",value:this.state.content,onChange:this.handleChangeContent.bind(this)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleClick},"Save")),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-outline-danger btn-sm mt-2",onClick:this.handleClickDelete},"Delete")))}}]),a}(n.Component),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement(h.a,{exact:!0,path:"/",component:b}),r.a.createElement(h.a,{path:"/about",component:p}),r.a.createElement(h.a,{path:"/test",component:N}),r.a.createElement(h.a,{path:"/login",component:I}),r.a.createElement(h.a,{path:"/logout",component:T}),r.a.createElement(h.a,{path:"/plan_create",component:R}),r.a.createElement(h.a,{path:"/plan",component:K}),r.a.createElement(h.a,{path:"/plan_show/:id",component:U}),r.a.createElement(h.a,{path:"/plan_edit/:id",component:H}),r.a.createElement(h.a,{path:"/task",component:D}),r.a.createElement(h.a,{path:"/task_create",component:w}),r.a.createElement(h.a,{path:"/task_edit/:id",component:S}),r.a.createElement(h.a,{path:"/task_test",component:A}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.a.initializeApp({apiKey:"AIzaSyCEWHm9n33ayZ-_ktBFW_nE6Bis01_nXEA",authDomain:"spa1-project.firebaseapp.com",databaseURL:"https://spa1-project.firebaseio.com",projectId:"spa1-project",storageBucket:"spa1-project.appspot.com",messagingSenderId:"597018011814",appId:"1:597018011814:web:68e880a7483462f9512c67"}),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.381f5bf3.chunk.js.map